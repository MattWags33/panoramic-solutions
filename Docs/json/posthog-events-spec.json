{
  "schema_version": "1.0.0",
  "last_updated": "2025-11-05T12:00:00Z",
  "type": "SPECIFICATION",
  "metadata": {
    "project": "Panoramic Solutions - PPM Tool",
    "maintainer": "Parker Gawne",
    "mcp_compatible": true,
    "description": "Complete PostHog Event Specifications with Properties, Types, and Examples"
  },
  "events": {
    "core_metrics": [
      {
        "event_name": "New_Visitor",
        "category": "user_lifecycle",
        "fires_once_per_session": true,
        "tracking_function": "checkAndTrackNewVisitor(properties?)",
        "when_to_fire": "First time user visits /ppm-tool page",
        "properties": {
          "timestamp": {
            "type": "number",
            "required": true,
            "description": "Unix timestamp in milliseconds",
            "example": 1699132800000
          },
          "user_agent": {
            "type": "string",
            "required": true,
            "description": "Browser user agent string",
            "example": "Mozilla/5.0 (Windows NT 10.0; Win64; x64)..."
          },
          "referrer": {
            "type": "string",
            "required": false,
            "description": "Document referrer URL (where user came from)",
            "example": "https://google.com/search?q=ppm+tools"
          },
          "utm_source": {
            "type": "string",
            "required": false,
            "description": "UTM source parameter from URL",
            "example": "linkedin"
          },
          "utm_medium": {
            "type": "string",
            "required": false,
            "description": "UTM medium parameter",
            "example": "social"
          },
          "utm_campaign": {
            "type": "string",
            "required": false,
            "description": "UTM campaign parameter",
            "example": "pmp_november_2025"
          }
        },
        "example_payload": {
          "event": "New_Visitor",
          "properties": {
            "timestamp": 1699132800000,
            "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)...",
            "referrer": "https://linkedin.com",
            "utm_source": "linkedin",
            "utm_medium": "social",
            "utm_campaign": "pmp_launch"
          }
        }
      },
      {
        "event_name": "New_Active",
        "category": "user_lifecycle",
        "fires_once_per_session": true,
        "tracking_function": "checkAndTrackNewActive(action, properties?)",
        "when_to_fire": "First meaningful action (NOT just closing 'how it works' if user started there)",
        "special_logic": {
          "how_it_works_check": "If landing_path contains 'section=how-it-works' AND action is 'how_it_works_close', do NOT fire",
          "next_action_counts": "Any other action after closing 'how it works' will fire New_Active"
        },
        "properties": {
          "action": {
            "type": "string",
            "required": true,
            "description": "Type of action that made user active",
            "allowed_values": [
              "slider_moved",
              "guided_ranking_clicked",
              "manual_ranking_clicked",
              "try_free_clicked",
              "add_to_compare_clicked",
              "how_it_works_close",
              "Active-details",
              "Active-guided",
              "Active-reset-criteria"
            ],
            "example": "slider_moved"
          },
          "page": {
            "type": "string",
            "required": false,
            "description": "Page where action occurred",
            "example": "ppm_tool"
          },
          "interaction_type": {
            "type": "string",
            "required": false,
            "description": "Type of interaction",
            "example": "button_click"
          },
          "component": {
            "type": "string",
            "required": false,
            "description": "Component where action happened",
            "example": "criteria_section"
          },
          "criteria_id": {
            "type": "string",
            "required": false,
            "description": "ID of criterion if action was slider_moved",
            "example": "scalability"
          },
          "tool_id": {
            "type": "string",
            "required": false,
            "description": "Tool ID if action was tool-related",
            "example": "uuid-here"
          }
        },
        "example_payloads": [
          {
            "event": "New_Active",
            "properties": {
              "action": "slider_moved",
              "criteria_id": "scalability",
              "criteria_name": "Scalability",
              "score": 4
            }
          },
          {
            "event": "New_Active",
            "properties": {
              "action": "guided_ranking_clicked",
              "page": "ppm_tool",
              "interaction_type": "button_click",
              "source": "how_it_works_overlay"
            }
          }
        ]
      },
      {
        "event_name": "New_Manual_Ranking",
        "category": "engagement",
        "fires_once_per_session": true,
        "tracking_function": "checkAndTrackNewManualRanking(properties?)",
        "when_to_fire": "First time user moves any criteria slider",
        "properties": {
          "criteria_id": {
            "type": "string",
            "required": true,
            "description": "ID of criterion slider that was moved",
            "example": "scalability"
          },
          "criteria_name": {
            "type": "string",
            "required": true,
            "description": "Human-readable name of criterion",
            "example": "Scalability"
          },
          "score": {
            "type": "number",
            "required": true,
            "description": "New slider value (1-5)",
            "min": 1,
            "max": 5,
            "example": 4
          },
          "interaction_type": {
            "type": "string",
            "required": false,
            "description": "Always 'slider_movement' for manual ranking",
            "example": "slider_movement"
          }
        },
        "example_payload": {
          "event": "New_Manual_Ranking",
          "properties": {
            "criteria_id": "ease_of_use",
            "criteria_name": "Ease of Use",
            "score": 5,
            "interaction_type": "slider_movement"
          }
        }
      },
      {
        "event_name": "New_Partial_Ranking",
        "category": "engagement",
        "fires_once_per_session": true,
        "tracking_function": "checkAndTrackNewPartialRanking(properties?)",
        "when_to_fire": "First time user answers any guided ranking question",
        "properties": {
          "question_id": {
            "type": "string",
            "required": true,
            "description": "ID of question answered",
            "example": "q1"
          },
          "question_text": {
            "type": "string",
            "required": true,
            "description": "Full text of the question",
            "example": "How many projects does your team manage annually?"
          },
          "question_number": {
            "type": "number",
            "required": true,
            "description": "Question sequence number (1-12)",
            "min": 1,
            "max": 12,
            "example": 1
          },
          "answer": {
            "type": "number | array",
            "required": true,
            "description": "Answer value (number for single-select, array for multi-select)",
            "example": 4
          },
          "affects_criteria": {
            "type": "string",
            "required": false,
            "description": "Which criterion this question affects",
            "example": "Scalability"
          },
          "total_questions": {
            "type": "number",
            "required": false,
            "description": "Total number of questions in guided ranking",
            "example": 12
          }
        },
        "example_payload": {
          "event": "New_Partial_Ranking",
          "properties": {
            "question_id": "q2",
            "question_text": "What is your team's experience with PM tools?",
            "question_number": 2,
            "answer": 3,
            "affects_criteria": "Ease of Use",
            "total_questions": 12
          }
        }
      },
      {
        "event_name": "New_Full_Ranking_Submittal",
        "category": "conversion",
        "fires_once_per_session": true,
        "tracking_function": "checkAndTrackNewFullRankingSubmittal(properties?)",
        "when_to_fire": "User completes entire guided ranking OR all partial rankings are complete",
        "properties": {
          "completion_method": {
            "type": "string",
            "required": true,
            "description": "How ranking was completed",
            "allowed_values": ["full_form_submit", "incremental_completion"],
            "example": "full_form_submit"
          },
          "ranking_type": {
            "type": "string",
            "required": true,
            "description": "Type of ranking (always 'guided' currently)",
            "example": "guided"
          },
          "total_questions_answered": {
            "type": "number",
            "required": true,
            "description": "Number of questions answered (should be 12 for full)",
            "example": 12
          },
          "criteria_affected": {
            "type": "array",
            "required": true,
            "description": "Array of criterion IDs that were updated",
            "example": ["scalability", "ease_of_use", "integration"]
          },
          "has_personalization": {
            "type": "boolean",
            "required": true,
            "description": "Whether firmographic data was collected",
            "example": true
          },
          "firmographics": {
            "type": "object",
            "required": false,
            "description": "Company profile data (size, departments, methodologies)",
            "example": {
              "company_size": "500+ employees",
              "departments": ["IT", "PMO"],
              "methodologies": ["Agile", "Hybrid"]
            }
          },
          "time_to_complete_seconds": {
            "type": "number",
            "required": false,
            "description": "Time from form open to submit (seconds)",
            "example": 180
          }
        },
        "example_payload": {
          "event": "New_Full_Ranking_Submittal",
          "properties": {
            "completion_method": "full_form_submit",
            "ranking_type": "guided",
            "total_questions_answered": 12,
            "criteria_affected": ["scalability", "ease_of_use", "integration", "reporting"],
            "has_personalization": true,
            "firmographics": {
              "company_size": "100-499 employees",
              "departments": ["IT", "PMO", "Operations"],
              "methodologies": ["Agile"]
            },
            "time_to_complete_seconds": 240
          }
        }
      },
      {
        "event_name": "New_Report_Sent",
        "category": "conversion",
        "fires_once_per_session": true,
        "tracking_function": "checkAndTrackNewReportSent(properties?)",
        "when_to_fire": "User successfully sends email report with recommendations",
        "properties": {
          "email": {
            "type": "string",
            "required": false,
            "description": "User's email address (PII - handle with care)",
            "example": "john.doe@acme.com"
          },
          "first_name": {
            "type": "string",
            "required": false,
            "description": "User's first name",
            "example": "John"
          },
          "last_name": {
            "type": "string",
            "required": false,
            "description": "User's last name",
            "example": "Doe"
          },
          "tools_sent": {
            "type": "array",
            "required": false,
            "description": "Array of tool names included in report",
            "example": ["Monday.com", "Asana", "ClickUp"]
          },
          "criteria_rankings": {
            "type": "object",
            "required": false,
            "description": "Final criteria rankings",
            "example": {
              "scalability": 4,
              "ease_of_use": 5,
              "integration": 5
            }
          },
          "match_scores": {
            "type": "array",
            "required": false,
            "description": "Tool match scores and rankings",
            "example": [
              {"tool": "Monday.com", "score": 8.8, "rank": 1},
              {"tool": "Asana", "score": 8.5, "rank": 2}
            ]
          }
        },
        "example_payload": {
          "event": "New_Report_Sent",
          "properties": {
            "email": "sarah.smith@startup.com",
            "first_name": "Sarah",
            "last_name": "Smith",
            "tools_sent": ["Monday.com", "Notion", "Asana"],
            "criteria_rankings": {
              "collaboration": 5,
              "integration": 5,
              "ease_of_use": 4
            },
            "match_scores": [
              {"tool": "Monday.com", "score": 8.8, "rank": 1},
              {"tool": "Notion", "score": 8.3, "rank": 2},
              {"tool": "Asana", "score": 8.1, "rank": 3}
            ]
          }
        }
      }
    ],
    "monetization_events": [
      {
        "event_name": "Tool_Try_Free_Click",
        "category": "monetization",
        "fires_on_every_click": true,
        "tracking_function": "trackToolTryFreeClick(properties)",
        "when_to_fire": "User clicks 'Try Free Trial' button for any tool",
        "vendor_value": "$75 per click",
        "properties": {
          "tool_id": {
            "type": "string",
            "required": true,
            "description": "UUID of the tool",
            "example": "abc-123-def-456"
          },
          "tool_name": {
            "type": "string",
            "required": true,
            "description": "Name of the tool",
            "example": "Monday.com"
          },
          "position": {
            "type": "number",
            "required": false,
            "description": "Rank in recommendation list (1=top)",
            "example": 1
          },
          "match_score": {
            "type": "number",
            "required": false,
            "description": "Match score displayed to user (0-10)",
            "example": 8.8
          },
          "criteria_rankings": {
            "type": "object",
            "required": false,
            "description": "User's criteria rankings at time of click",
            "example": {
              "scalability": 4,
              "ease_of_use": 5
            }
          },
          "firmographics": {
            "type": "object",
            "required": false,
            "description": "Company profile if available",
            "example": {
              "company_size": "500+ employees"
            }
          }
        },
        "example_payload": {
          "event": "Tool_Try_Free_Click",
          "properties": {
            "tool_id": "monday-com-uuid",
            "tool_name": "Monday.com",
            "position": 1,
            "match_score": 8.8,
            "criteria_rankings": {
              "collaboration": 5,
              "integration": 5,
              "scalability": 4
            }
          }
        }
      },
      {
        "event_name": "Tool_Add_To_Compare_Click",
        "category": "monetization",
        "fires_on_every_click": true,
        "tracking_function": "trackToolAddToCompareClick(properties)",
        "when_to_fire": "User clicks 'Add to Compare' button for any tool",
        "vendor_value": "Medium-high intent signal",
        "properties": {
          "tool_id": {
            "type": "string",
            "required": true,
            "description": "UUID of the tool",
            "example": "asana-uuid"
          },
          "tool_name": {
            "type": "string",
            "required": true,
            "description": "Name of the tool",
            "example": "Asana"
          },
          "position": {
            "type": "number",
            "required": false,
            "description": "Rank in list",
            "example": 2
          },
          "match_score": {
            "type": "number",
            "required": false,
            "description": "Match score (0-10)",
            "example": 8.5
          },
          "comparing_with": {
            "type": "array",
            "required": false,
            "description": "Names of other tools being compared",
            "example": ["Monday.com", "ClickUp"]
          }
        },
        "example_payload": {
          "event": "Tool_Add_To_Compare_Click",
          "properties": {
            "tool_id": "asana-uuid",
            "tool_name": "Asana",
            "position": 2,
            "match_score": 8.5,
            "comparing_with": ["Monday.com", "ClickUp"]
          }
        }
      },
      {
        "event_name": "Tool_View_Details_Click",
        "category": "monetization",
        "fires_on_every_click": true,
        "tracking_function": "trackToolViewDetailsClick(properties)",
        "when_to_fire": "User expands tool details accordion",
        "vendor_value": "Low-medium intent signal",
        "properties": {
          "tool_id": {
            "type": "string",
            "required": true,
            "description": "UUID of the tool",
            "example": "jira-uuid"
          },
          "tool_name": {
            "type": "string",
            "required": true,
            "description": "Name of the tool",
            "example": "Jira"
          },
          "position": {
            "type": "number",
            "required": false,
            "description": "Rank in list",
            "example": 3
          },
          "match_score": {
            "type": "number",
            "required": false,
            "description": "Match score (0-10)",
            "example": 8.2
          },
          "expanded": {
            "type": "boolean",
            "required": false,
            "description": "Always true when accordion expands",
            "example": true
          }
        },
        "example_payload": {
          "event": "Tool_View_Details_Click",
          "properties": {
            "tool_id": "jira-uuid",
            "tool_name": "Jira",
            "position": 3,
            "match_score": 8.2,
            "expanded": true
          }
        }
      }
    ]
  },
  "property_types": {
    "string": "Text value",
    "number": "Numeric value (integer or float)",
    "boolean": "True or false",
    "array": "Array of values",
    "object": "JSON object with key-value pairs"
  },
  "common_patterns": {
    "attribution_properties": {
      "description": "All events automatically include attribution data from getAttribution()",
      "properties": [
        "utm_source",
        "utm_medium",
        "utm_campaign",
        "referrer"
      ]
    },
    "timestamp_format": {
      "description": "All events include timestamp in Unix milliseconds",
      "example": 1699132800000
    }
  },
  "validation_rules": {
    "required_properties": "Events will fire with or without optional properties",
    "type_safety": "TypeScript ensures type correctness at compile time",
    "error_handling": "All tracking wrapped in try/catch - never throws",
    "missing_properties": "Optional properties can be undefined/null - won't break tracking"
  }
}

